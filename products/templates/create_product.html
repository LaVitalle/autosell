<!-- create_product.html -->
{% extends 'dashboard.html' %} {% block content %}
<div class="w-full h-auto bg-gray-900 text-white flex justify-center items-start">
  <div class="w-full max-w-4xl bg-gray-800 p-8 rounded-lg shadow-lg">
    <h2 class="text-3xl font-bold mb-6">Criar Novo Produto</h2>

    <form method="POST" enctype="multipart/form-data" class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% csrf_token %}
      <!-- Nome -->
      <div class="col-span-2">
        <label for="id_name" class="block text-gray-300 mb-2">Nome</label>
        <input type="text" name="name" id="id_name" value="{{ form.name.value|default_if_none:'' }}"
          class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" />
        {% if form.name.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.name.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Descrição -->
      <div class="col-span-2">
        <label for="id_description" class="block text-gray-300 mb-2">Descrição</label>
        <textarea name="description" id="id_description"
          class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white">
{{ form.description.value|default_if_none:'' }}</textarea>
        {% if form.description.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.description.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Preço -->
      <div>
        <label for="id_price" class="block text-gray-300 mb-2">Preço</label>
        <input type="number" step="0.01" name="price" id="id_price" value="{{ form.price.value|default_if_none:'' }}"
          class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" />
        {% if form.price.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.price.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Imagem -->
      <div>
        <label for="id_image_file" class="block text-gray-300 mb-2">Imagem</label>
        <input type="file" name="image_file" id="id_image_file"
          class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 text-white" />
        {% if form.image_file.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.image_file.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Quantidade -->
      <div>
        <label for="id_stock_quantity" class="block text-gray-300 mb-2">Quantidade</label>
        <input type="number" name="stock_quantity" id="id_stock_quantity"
          value="{{ form.stock_quantity.value|default_if_none:'' }}" class="w-full p-3 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 text-white
           disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed" />
        {% if form.stock_quantity.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.stock_quantity.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Estoque Ativo -->
      <div class="flex items-center mt-2">
        <input type="checkbox" name="stock_active" id="id_stock_active" {% if form.stock_active.value %}checked
          {%endif%} class="h-5 w-5 text-blue-500 focus:ring-blue-400 border-gray-600 rounded" />
        <label for="id_stock_active" class="ml-2 text-gray-300">Estoque Ativo</label>
        {% if form.stock_active.errors %}
        <p class="text-red-500 text-sm mt-1">{{ form.stock_active.errors.0 }}</p>
        {% endif %}
      </div>

      <!-- Botão de Enviar -->
      <div class="col-span-2 flex justify-end mt-4">
        <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg">
          Criar Produto
        </button>
      </div>
    </form>
  </div>
  <script>
    const checkbox = document.getElementById('id_stock_active');
    const quantity = document.getElementById('id_stock_quantity');

    const toggle = () => {
      quantity.disabled = !checkbox.checked;
      if (!checkbox.checked) quantity.value = 0;
    }

    toggle(); // inicializa
    checkbox.addEventListener('change', toggle);
  </script>
</div>
{% endblock %}